<html>
<head>
	<title>sso-web-user 登入页面</title>
	<meta charset="utf-8"/>
	<script src="http://cdn.bootcss.com/jquery/3.1.1/jquery.js"></script>
</head>
<body>
	<input type="text" id='userName' name="cellphone" value="1304088"/><br/>
	<input type="password" id='password' name="userPwd" value="12321"/><br/>
	<input type="button" id='submit' value="登入"/>
</body>
<script type='text/javascript'>
	$('#submit').click(function(){
		$.ajax({
			url:'/user/login',
			type:'post',
			dataType:'json',
			data:{
				cellphone: $('#userName').val(),
				passWd: $('#password').val()
			},
			success:function(res){
				res.data.ssoUrls.forEach(function(val,i){
				/* 	$.getJSON(val + '/sso/login?token='+data.data.ssoToken+'&jsoncallback=?', function(data){
						console.log(data);
					}) */
					//$.support.cors = true;
					$.ajax({
						type: "get",
						async: false,
						url: "http:\/\/" + val + "/sso/login?token=" + res.data.ssoToken,
						cache: false,
						crossDomain:true,
						dataType: "jsonp",
						scriptCharset: 'utf-8',
						jsonp: "jsonpcallback",
						success: function(json) {
							console.log(json);
						},
						error: function(e) {}
					});
				})
			}
		})
		
		
	})
	
</script>
</html>
